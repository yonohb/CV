<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<link type="text/css" rel="stylesheet" href="dtdExercise.css"/> 
	<title>Övningar i XML/DTD</title>
	<style>*{margin:10px; padding:0;}
		img {border:1px solid black;}</style>
</head>
<body>
	<div>
		<h1>Övning i XML/DTD</h1>
		<h2>Steg 1</h2>
		<p>Denna övning är för att du ska förstå vad "välformadhet" av en XML-fil innebär och hur DTD-filen styr "giltighet" på XML-filen. I övningen tittar vi också på hur XML-editorn och webbläsaren (Firefox eller Internet Explorer) reagerar vid olika regelbrott. XML-editorn är det program du skriver XML-koden i, använd EditiX eller XMLSpear.</p>
		<p>Först skapar du en mapp i någonstans på din dator (om det är en av högskolans datorer, i arean F) eller på något minne. T.ex döper jag den xmlOvning. OBS: Svenska speciella tecken åäö och mellanslag får inte vara med i mapp- eller filnamn. Därefter öppnar du XMLSpear, EdiTiX eller oXygen. Om du använder skolans datorer hittar du båda program via <strong>Start-menyn -> HB -> Developer Tools</strong>. I det fortsatta kommer det vara delvis olika instruktioner beroende på vilket av programmen du använder, håll koll på rubrikerna och hoppa över de som har fel programnamn.</p>
		
		<h3>XMLSpear</h3>
		<p>Skapa en ny fil genom att klicka <strong>File->New</strong>. Välj <strong>XML File</strong> som "Document type" i det lilla fönstret New Document och klicka OK. </p>
		<p>Ett nytt dokument öppnas i editorn. På första raden ska det stå:</p>
		<code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br/></code>
		<p>Den är inte en fil än. Du måste döpa denna och bestämma var du vill spara den. Då blir det en fil. Du klickar<strong>File->Save as</strong>. Det ska då komma upp en "Save As..."-ruta. Klicka på knappen "Options.." och kontrollera att "File Encoding" är UTF-8. Om det är det, klicka "Cancel" annars väljer du <strong>UTF-8</strong> i listan och klickar OK.
			Välj var filen sparas, i mappen du har skapat, och på vilket namn. Innan du sparar genom klicka Save, kontrollera att det är XML File (*.xml) som är valt som filformat ("filetype" på engelska).</p>
		
		
		<h3>EdiTiX</h3>
		<p>Först försäkrar du att kodningschemat är rätt genom att klicka <strong>File->Encoding->UTF-8</strong> och sedan skapar du ny XML-fil genom att klicka <strong>File -> New document</strong>. Sedan väljer du <strong>Standard XML document</strong> i det lilla fönstret New document och klickar OK. </p>
		<p>Ett nytt dokument öppnas i editorn. På första raden ska det stå:</p>
		<code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br/></code>
		
			<p>Den är inte en fil än. Du måste döpa denna och bestämma var du vill spara den. Då blir det en fil. Du klickar<strong>File->Save as</strong>och väljer var filen sparas, i mappen du har skapat, och på vilket namn. Innan du sparar genom klicka Save, kontrollera om det är XML document (*.xml) är valt som filtyp ("filetype" på engelska). </p>
				
		<h3>oXygen</h3>
		
		<h3>Oavsett program</h3>
		<p>Du kan se i fliken ovan dokumentet att den har fått namnet du valt. Om du ställer muspekaren på filnamnet, visas var filen är sparad också. På så sätt kan du skilja på filer med samma namn sparade i olika mappar, men du bör undvika döpa flera filer med samma namn för säkerhets skull.</p>
		<p>Den allra första raden högst upp i dokumentet ska du inte röra på, det är den så kallade XML-deklarationen. Inte ett enda mellanslag får förekomma före den. Om du vill veta mer om XML-deklarationen och kommentartaggen, kan du gå  till <a href="http://www.w3schools.com/xml/default.asp">w3schools.com's XML tutorial</a>. Du fyller på filen som visas nedan. Var noga med att inte ha XML-deklarationen två gånger. Sedan sparar du filen igen. Nu har din XML-fil innehåll men inte länkad till någon DTD.</p>
		
		<code></br>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br/>
&lt;collection&gt;<br/>
&lt;book id='a1'&gt;<br/>
&lt;isbn>0385&lt;/isbn&gt;<br/>
&lt;title>The Da Vinch Code&lt;/title&gt;<br/>
&lt;author sex="male"&gt;<br/>
&lt;gname>Dan&lt;/gname&gt;<br/>
&lt;fname>Brown&lt;/fname&gt;<br/>
&lt;/author&gt;<br/>
&lt;pages&gt;454 sidor&lt;/pages&gt;<br/>
&lt;/book&gt;<br/>
&lt;/collection&gt;<br/>

</code>
	
	<h3>Kontrollera koden - XMLSpear</h3>
	<p>Kolla längst ned under koden. Där finns en flik som heter "Problems". Om allting är rätt står det "Document is wellformed XML". I annat fall står det felmeddelanden där. Om du får det, bryter du mot någon XML-regel och därmed är filen inte välformad. Försök rätta till innan du går till nästa steg. Du kan be om hjälp av någon lärare eller kompisar.</p>
	<h3>Kontrollera koden - EdiTiX</h3>
	 <p>Med <strong>ctrl + K</strong> aktiveras EditiX:s XML-kontrollfunktion. Tryck in båda tangenter samtidigt. Ser du något felmeddelande av EditiX i nedersta delen av editorn? Om du får det, bryter du mot någon XML-regel och därmed är filen inte välformad. Försök rätta till innan du går till nästa steg. Du kan be om hjälp av någon lärare eller kompisar. Spara och tryck ctrl + K igen för att kontrollera koden på nytt.</p>	
	<h2>Steg 2</h2>
		<p>Nu har du en välformad XML-fil. Du ska öppna filen på din webbläsare (Firefox eller Internet Explorer). Det finns två sätt att öppna filen i webbläsaren. Antingen går du till katalogen och hittar mappen xmlOvning och högerklickar på filnamnet. I menyn som kommer upp väljer du <strong>Öppna med->Firefox</strong> (eller Internet Explorer). Eller så öppnar du först din webbläsare. Sedan med <strong>ctrl + o</strong>öppnar du ett litet fönster "Open file" där du kan välja filen.</p><p> Hur ser filen ut i webbläsaren? Inget felmeddelande heller? Nej. Filen är ju välformad.</p>
		<p>Innan vi ser på giltighet kollar vi närmare välformadhet, det vill säga XML:s allmänna regler. Nu ska du prova med vanliga fel (regelbrott) för att se hur EditiX/XMLSpear och Firefox/Internet Explorer reagerar. Du kan byta ut "c" i början av starttaggen för rootelementet till "C", en versal. Spara filen. Kör kontroll genom ctrl + K om du använder EdiTiX. Vad säger programmet? Vad händer när filen öppnas (eller bara uppdateras genom F5 eller webbläsarens uppdateringsknapp) i webbläsaren? Varför blir det som det blev? Du kan rätta och spara filen igen. Uppdatera webbläsaren.</p>
		<p>Nu ska du radera något tecken i en av taggarna, till exempel "/" eller "&lt;" eller någon bokstav. Spara filen. Kör kontrollen. Vad säger EditiX/XMLSpear? Vad händer när filen öppnas (eller bara uppdateras) i webbläsaren? Varför blir det som det blir? Du kan rätta och spara filen igen. Uppdatera webbläsaren.</p>
		<p>Du ska nu radera någon start- eller sluttagg helt. Spara filen. Kör kontroll. Vad säger EditiX/XMLSpear? Vad händer när filen öppnas (eller bara uppdateras) på webbläsaren? Varför blir det som det blir? Du kan rätta och spara filen igen. Uppdatera webbläsaren.</p>
		<p>Här gången provar vi ett felaktigt nästlande. Du flyttar author-elementets sluttagg till framför fname-elementets sluttagg. Spara filen. Editix kan börja klaga innan sparandet. Kör kontroll. Vad säger EditiX/XMLSpear? Uppdatera webbläsaren för att se vad som händer. Varför blir det som det blir? Rätta filen i editorn igen och uppdatera webbläsaren.</p>
		
		<h2>Steg 3</h2>
		<p>I det här läget har du lärt dig hur ett fel kan ser ut i Editix/XMLSpear och en webbläsare. Dessvärre kan ett fel synas enbart i webbläsaren också, men detta kommer vi ta upp i samband med SKOS.</p>
		<p>Nu lägger du länken till en DTD-fil, books.dtd, i XML-filen. Dokumenttyp-deklarationen ska skrivas in i XML-filen, </br>
			<code>&lt;!DOCTYPE collection SYSTEM "books.dtd"&gt;</code></br> efter xml-deklarationen. Spara XML-filen i Editix/XMLSpear. I XMLSpear behöver du välja radioknappen dtd och sedan klicka knappen med en grön märke. Vad säger EditiX/XMLSpear? Vad säger webbläsaren? Om du använder XMLSpear: Precis ovanför koden finns lite olika alternativ. Klicka i cirkeln som står före "dtd" och därefter på den gröna bocken lite till vänster om den. Vad händer? Klicka på Cancel för att stänga ned rutan som dyker upp.
		<p>Felmeddelandena du får nu beror på att du säger till programmet att följa reglerna som finns i filen "books.dtd", men programmet kan inte hitta den filen. Därför måste du ladda ner filen books.dtd från kursaktiviteten i Ping Pong (Dokument -> Tesauruskonstruktion -> XML/SKOS) och spara den i samma mapp som XML-filen. Ligger DTD-filen i samma mapp som XML-filen räcker det med filnamnet för att editorn ska hitta den. Kontrollera på nytt så att inget felmeddelande genereras. Använder du XMLSpear behöver du stänga filen och öppna den på nytt för att den ska "förstå" att den kan hitta DTD-filen. Uppdatera också webbläsaren. Visas XML-filen korrekt? Om du inte får några felmeddelanden är XML-filen både välformad och giltig.</p>
		<p>Nu ska vi prova med några olika sätt att bryta mot reglerna i DTD:n. Du ska ta bort hela title-elementet. Spara. Kontrollera vad som händer i EditiX/XMLSpear (med den gröna bocken i XMLSpear eller ctrl + K i EdiTiX) och i webbläsaren. Fundera varför det blir som det blir genom att öppna DTD-filen och tolka reglerna/definitionerna där. Lägg tillbaka title-elementet efter isbn-elementet och kontrollera på nytt.</p>
		<p>Du ska ta bort hela isbn-elementet. Spara. Kontrollera vad som händer i EditiX/XMLSpear och i webbläsaren. Varför blir det som det blev? Lägg tillbaka isbn-elementet mellan book- och title-elementen och spara/uppdatera.</p>
		<p>Du ska skriva in ett title-element till efter det andra title-elementet. Spara. Kontrollera vad som händer i EditiX och i webbläsaren. Varför blir det som det blir? Rätta till och spara/uppdatera.</p>
		<p>Du ska byta plats av isbn-elementet och titel-elementet. Spara och kontrollera. Varför blir det som det blir? Rätta till och spara/uppdatera.</p>
		<p>Du ska lägga till ett nytt page-element efter det ursprungliga page-elementet. Spara och kontrollera. Varför blir det som det blir?</p>
		<p>Du ska lägga till ett dimension-element med något värde i efter något page-element. Spara och kontrollera. Varför blir det som det blir? Var kan du flytta dimension-elementet utan att få ett felmeddelande?</p>
		<p>Ta bort värdet av page-elementet, det vill säga "454 sidor". Spara och kontrollera. Varför blir det som det blir? Rätta till och spara/uppdatera.</p>
		<p>Ta bort attributet i book-elementets starttagg. Spara och kontrollera. Varför blir det som det blir? Rätta till och spara/uppdatera.</p>
		<p>Ta bort attributet i author-elementets starttagg. Spara och kontrollera. Varför blir det som det blir? Rätta till och spara/uppdatera.</p>
		
		<h2>Steg 4</h2>
		<p>Här gången ska du behålla filen giltig och välformad medan du utökar filens innehåll. Du ska lägga till ett author-element. Var försiktig med ordning av gname- och fname-element. Spara och kontrollera.</p>
		<p>Du ska skapa ett nytt book-element till. Hitta någon katalogpost och skapa ett book-element efter den, eller hitta titel och övrigt innehåll. Lycka till!</p>
	</div>
	
</body>
</html>
